<% provide(:title, "Edit Team") %>

<div class="container">
  <div class="row">
    <div class="col s12">
      <h2>Edit Team</h2>
    </div>
  </div>
  <div class="row edit">
    <%= form_with(model: @team) do |f| %>
      <div class="input-field col s10">
        <%= f.label :name %>
        <%= f.text_field :name, class: "validate #{form_validate(@team, :name)} form-control" %>
        <% if message = form_error(@team, :name) %>
          <span class="helper-text" data-error="<%= message %>"></span>
        <% end %>
      </div>
      <div class="button col s2">
        <%= button_tag 'SUBMIT', class: 'btn waves-effect waves-light', type: 'button', onclick: 'submit();' %>
      </div>
    <% end %>
  </div>
  <div class="row">
    <div class="col s12">
      <h2>Users</h2>
    </div>
  </div>
  <%= form_with(model: @team) do |f| %>
    <% @team.users.each do |user| %>
      <div class="row edit">
        <p class="col s5"><%= user.name %></p>
        <div class="col s5">
          <%= f.select :role, UserTeam.roles.to_a, selected: UserTeam.roles[user.role(@team)] %>
        </div>
        <div class="col s2">
          <%= link_to "DELETE", leave_team_path(@team.id), class: 'btn waves-effect waves-light' %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>